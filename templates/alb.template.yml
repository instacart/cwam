# Metrics
#
# Cf. http://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html
#
# TargetResponseTime: The time elapsed, in seconds, after the request leaves the load balancer until a response from the target is received.
# RequestCount: The number of requests received by the load balancer.
# NewConnectionCount: The total number of new TCP connections established from clients to the load balancer and from the load balancer to targets.
# ActiveConnectionCount: The total number of concurrent TCP connections active from clients to the load balancer and from the load balancer to targets.
# ProcessedBytes: The total number of bytes processed by the load balancer.
# TargetConnectionErrorCount: The number of connections that were not successfully established between the load balancer and target.
# RejectedConnectionCount: The number of connections that were rejected because the load balancer had reached its maximum number of connections.
# ClientTLSNegotiationErrorCount: The number of TLS connections initiated by the client that did not establish a session with the load balancer. Possible causes include a mismatch of ciphers or protocols.
# TargetTLSNegotiationErrorCount: The number of TLS connections initiated by the load balancer that did not establish a session with the target. Possible causes include a mismatch of ciphers or protocols.
# HTTPCode_Target_2XX_Count: The number of HTTP response codes generated by the targets. This does not include any response codes generated by the load balancer.
# HTTPCode_Target_3XX_Count: The number of HTTP response codes generated by the targets. This does not include any response codes generated by the load balancer.
# HTTPCode_Target_4XX_Count: The number of HTTP response codes generated by the targets. This does not include any response codes generated by the load balancer.
# HTTPCode_Target_5XX_Count: The number of HTTP response codes generated by the targets. This does not include any response codes generated by the load balancer.
# HTTPCode_ELB_4XX_Count: The number of HTTP 4XX client error codes that originate from the load balancer. Client errors are generated when requests are malformed or incomplete. These requests have not been received by the target. This count does not include any response codes generated by the targets.
# HTTPCode_ELB_5XX_Count: The number of HTTP 5XX server error codes that originate from the load balancer. This count does not include any response codes generated by the targets.

alb:
  namespace: AWS/ApplicationELB
  prefix: ALB
  # only:
  #   -
  #     key: LoadBalancerName
  #     regexp: staging
  #   -
  #     key: LoadBalancerName
  #     regexp: production
  # exclude:
  #   -
  #     key: LoadBalancerName
  #     regexp: staging
  #   -
  #     key: LoadBalancerName
  #     regexp: production
  sns:
    team1: arn:aws:sns:us-east-1:143926955510:pagerduty-team1
    team2: arn:aws:sns:us-east-1:143926955510:pagerduty-team2
    team3: arn:aws:sns:us-east-1:143926955510:pagerduty-team3
  default:
    all:
      EvaluationPeriods: 3
      Period: 60
    sns:
      AlarmActions:
        - team1
      OKActions:
        - team1
      InsufficientActions:
        - team1
  alarms:
    all:
      - HightTargetResponseTime:
          MetricName: TargetResponseTime
          Statistic: Average
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_ELB_5XX_Count:
          MetricName: HTTPCode_ELB_5XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
    my_load_balancer_name:
      - HightRequestCount:
          MetricName: RequestCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighNewConnectionCount:
          MetricName: NewConnectionCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighActiveConnectionCount:
          MetricName: ActiveConnectionCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighProcessedBytes:
          MetricName: ProcessedBytes
          Statistic: Average
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighTargetConnectionErrorCount:
          MetricName: TargetConnectionErrorCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighRejectedConnectionCount:
          MetricName: RejectedConnectionCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighClientTLSNegotiationErrorCount:
          MetricName: ClientTLSNegotiationErrorCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighTargetTLSNegotiationErrorCount:
          MetricName: TargetTLSNegotiationErrorCount
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_Target_2XX_Count:
          MetricName: HTTPCode_Target_2XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_Target_3XX_Count:
          MetricName: HTTPCode_Target_3XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_Target_4XX_Count:
          MetricName: HTTPCode_Target_4XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_Target_5XX_Count:
          MetricName: HTTPCode_Target_5XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
      - HighHTTPCode_ELB_4XX_Count:
          MetricName: HTTPCode_ELB_4XX_Count
          Statistic: Sum
          ComparisonOperator: GreaterThanOrEqualToThreshold
          Threshold: TODO
